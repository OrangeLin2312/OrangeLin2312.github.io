<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><!-- hexo injector head_begin start -->
<link rel="stylesheet" href="/css/bilicard.css">
<!-- hexo injector head_begin end --><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>AI百问 | 蒜头王八的个人博客</title><meta name="author" content="OrangeLin2312"><meta name="copyright" content="OrangeLin2312"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1问：mybatis映射那些事情MyBatis &lt;resultMap&gt;的使用方式当然可以！MyBatis 的 &lt;resultMap&gt; 是用于定义 SQL 查询结果如何映射到 Java对象的配置元素。它允许你指定字段到对象属性的映射关系，并支持复杂的数据结构如嵌套对象和集合。下面是具体的使用方法和示例。 基本用法1. 定义 resultMap在 MyBatis 中，你需要在">
<meta property="og:type" content="article">
<meta property="og:title" content="AI百问">
<meta property="og:url" content="https://orangelin2312.github.io/2024/12/02/AI%E7%99%BE%E9%97%AE/index.html">
<meta property="og:site_name" content="蒜头王八的个人博客">
<meta property="og:description" content="1问：mybatis映射那些事情MyBatis &lt;resultMap&gt;的使用方式当然可以！MyBatis 的 &lt;resultMap&gt; 是用于定义 SQL 查询结果如何映射到 Java对象的配置元素。它允许你指定字段到对象属性的映射关系，并支持复杂的数据结构如嵌套对象和集合。下面是具体的使用方法和示例。 基本用法1. 定义 resultMap在 MyBatis 中，你需要在">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://orangelin2312.github.io/images/banner3.webp">
<meta property="article:published_time" content="2024-12-02T13:41:13.000Z">
<meta property="article:modified_time" content="2024-12-11T07:34:17.771Z">
<meta property="article:author" content="OrangeLin2312">
<meta property="article:tag" content="ai解答">
<meta property="article:tag" content="腾讯元宝">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://orangelin2312.github.io/images/banner3.webp"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "AI百问",
  "url": "https://orangelin2312.github.io/2024/12/02/AI%E7%99%BE%E9%97%AE/",
  "image": "https://orangelin2312.github.io/images/banner3.webp",
  "datePublished": "2024-12-02T13:41:13.000Z",
  "dateModified": "2024-12-11T07:34:17.771Z",
  "author": [
    {
      "@type": "Person",
      "name": "OrangeLin2312",
      "url": "https://orangelin2312.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/images/xhx8.ico"><link rel="canonical" href="https://orangelin2312.github.io/2024/12/02/AI%E7%99%BE%E9%97%AE/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"已切换为繁体中文","cht_to_chs":"已切换为简体中文","day_to_night":"已切换为深色模式","night_to_day":"已切换为浅色模式","bgLight":"#FFFFB6","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'AI百问',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><script src="https://code.jquery.com/jquery-3.7.1.min.js"></script><link rel="stylesheet" href="/styles/css/main.css"><link rel="stylesheet" href="/styles/css/background.css"><link rel="stylesheet" href="/styles/css/shuoshuo.css"><link rel="stylesheet" href="/styles/css/homepage.css"><link rel="stylesheet" href="/styles/css/hometop.css"><link rel="stylesheet" href="/styles/css/postpage.css"><link rel="stylesheet" href="/styles/css/footer.css"><link rel="stylesheet" href="/styles/css/swiper-post.css"><link rel="stylesheet" href="/styles/css/mylogo.css"><link rel="stylesheet" href="/styles/css/about.css"><script src="/styles/js/homepage.js"></script><script src="/styles/js/hometop.js"></script><script src="/styles/js/mouseEvents.js"></script><script src="/styles/js/footer.js"></script><script src="/styles/js/firework.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js"></script><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiper.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiperstyle.css"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><!--#loading-box--><!--  .loading-left-bg--><!--  .loading-right-bg--><!--  .spinner-box--><!--    .configure-border-1--><!--      .configure-core--><!--    .configure-border-2--><!--      .configure-core--><!--    .loading-word= _p('loading')--><div id="loading-box"><div class="gear-loader"><div class="gear-loader_overlay"></div><div class="gear-loader_cogs"><div class="gear-loader_cogs__top"><div class="gear-top_part"></div><div class="gear-top_part"></div><div class="gear-top_part"></div><div class="gear-top_hole"></div></div><div class="gear-loader_cogs__left"><div class="gear-left_part"></div><div class="gear-left_part"></div><div class="gear-left_part"></div><div class="gear-left_hole"></div></div><div class="gear-loader_cogs__bottom"><div class="gear-bottom_part"></div><div class="gear-bottom_part"></div><div class="gear-bottom_part"></div><div class="gear-bottom_hole"></div></div></div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load', preloader.endLoading)

  if (true) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div id="web_bg" style="background-image: url(/images/img6.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/images/dog.jpg" onerror="onerror=null;src='/images/xhx.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">14</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fa fa-heart"></i><span> 说说</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 追番</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(/images/banner3.webp);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/images/xhx.gif" alt="Logo"><span class="site-name">蒜头王八的个人博客</span></a><a class="nav-page-title" href="/"><span class="site-name">AI百问</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fa fa-heart"></i><span> 说说</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 追番</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">AI百问</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-12-02T13:41:13.000Z" title="发表于 2024-12-02 21:41:13">2024-12-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-12-11T07:34:17.771Z" title="更新于 2024-12-11 15:34:17">2024-12-11</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">8.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>33分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><div id="my-logo"><div id="logo-items"><div class="logo-item1"><div class="i-text">富强</div></div><div class="logo-item2"><div class="i-text">民主</div></div><div class="logo-item3"><div class="i-text">文明</div></div><div class="logo-item4"><div class="i-text">和谐</div></div><div class="logo-item5"><div class="i-text">自由</div></div><div class="logo-item6"><div class="i-text">平等</div></div></div></div><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;已经过了&quot;,&quot;messageNext&quot;:&quot;天自上次更新，文章内容可能已过时。&quot;,&quot;postUpdate&quot;:&quot;2024-12-11 15:34:17&quot;}" hidden></div><h1 id="1问：mybatis映射那些事情"><a href="#1问：mybatis映射那些事情" class="headerlink" title="1问：mybatis映射那些事情"></a>1问：mybatis映射那些事情</h1><h2 id="MyBatis-的使用方式"><a href="#MyBatis-的使用方式" class="headerlink" title="MyBatis &lt;resultMap&gt;的使用方式"></a>MyBatis <code>&lt;resultMap&gt;</code>的使用方式</h2><p>当然可以！MyBatis 的 <code>&lt;resultMap&gt;</code> 是用于定义 SQL 查询结果如何映射到 Java<br>对象的配置元素。它允许你指定字段到对象属性的映射关系，并支持复杂的数据结构如嵌套对象和集合。下面是具体的使用方法和示例。</p>
<h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h3><h4 id="1-定义-resultMap"><a href="#1-定义-resultMap" class="headerlink" title="1. 定义 resultMap"></a>1. <strong>定义 <code>resultMap</code></strong></h4><p>在 MyBatis 中，你需要在 XML 配置文件中定义 <code>&lt;resultMap&gt;</code> 元素，用于映射 SQL 查询结果到 Java 对象。</p>
<p><strong>示例：</strong></p>
<p>假设你有一个 <code>User</code> 类，它包含 <code>id</code>, <code>name</code>, 和 <code>age</code> 属性：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="comment">// getters and setters</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>你可以在 MyBatis XML 映射文件中定义 <code>resultMap</code> 如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span>resultMap id<span class="operator">=</span>&quot;userResultMap&quot; type<span class="operator">=</span>&quot;com.example.User&quot;<span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span>id property<span class="operator">=</span>&quot;id&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;user_id&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;name&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;user_name&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;age&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;user_age&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&lt;</span><span class="operator">/</span>resultMap<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>id</code> 元素用于标识主键。</li>
<li><code>result</code> 元素用于映射普通字段。</li>
</ul>
<h4 id="2-使用-resultMap"><a href="#2-使用-resultMap" class="headerlink" title="2. 使用 resultMap"></a>2. <strong>使用 <code>resultMap</code></strong></h4><p>在你的 SQL 映射中，你可以引用这个 <code>resultMap</code> 来映射查询结果：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span></span><br><span class="line"><span class="keyword">select</span> id <span class="operator">=</span> &quot;getUserById&quot; resultMap<span class="operator">=</span>&quot;userResultMap&quot;<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">SELECT</span> user_id, user_name, user_age</span><br><span class="line"><span class="keyword">FROM</span> users</span><br><span class="line"><span class="keyword">WHERE</span> user_id <span class="operator">=</span> #&#123;id&#125;</span><br><span class="line">          <span class="operator">&lt;</span> <span class="operator">/</span></span><br><span class="line"><span class="keyword">select</span><span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="高级用法"><a href="#高级用法" class="headerlink" title="高级用法"></a>高级用法</h3><h4 id="1-嵌套映射"><a href="#1-嵌套映射" class="headerlink" title="1. 嵌套映射"></a>1. <strong>嵌套映射</strong></h4><p><code>resultMap</code> 也可以用于嵌套对象的映射。例如，如果你有一个 <code>Order</code> 对象，它包含一个 <code>User</code> 对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Order</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">    <span class="keyword">private</span> String status;</span><br><span class="line">    <span class="comment">// getters and setters</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>你可以定义嵌套的 <code>resultMap</code> 如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span>resultMap id<span class="operator">=</span>&quot;userResultMap&quot; type<span class="operator">=</span>&quot;com.example.User&quot;<span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span>id property<span class="operator">=</span>&quot;id&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;user_id&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;name&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;user_name&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;age&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;user_age&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&lt;</span><span class="operator">/</span>resultMap<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&lt;</span>resultMap id<span class="operator">=</span>&quot;orderResultMap&quot; type<span class="operator">=</span>&quot;com.example.Order&quot;<span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span>id property<span class="operator">=</span>&quot;id&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;order_id&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span>association property<span class="operator">=</span>&quot;user&quot; javaType<span class="operator">=</span>&quot;com.example.User&quot; resultMap<span class="operator">=</span>&quot;userResultMap&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;status&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;order_status&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&lt;</span><span class="operator">/</span>resultMap<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>association</code> 元素用于映射嵌套对象。</li>
</ul>
<h4 id="2-集合映射"><a href="#2-集合映射" class="headerlink" title="2. 集合映射"></a>2. <strong>集合映射</strong></h4><p>如果你的对象包含一个集合，可以使用 <code>&lt;collection&gt;</code> 元素。例如，如果 <code>User</code> 对象包含多个 <code>Order</code> 对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Order&gt; orders;</span><br><span class="line">    <span class="comment">// getters and setters</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>你可以在 <code>resultMap</code> 中使用 <code>&lt;collection&gt;</code> 元素：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span>resultMap id<span class="operator">=</span>&quot;orderResultMap&quot; type<span class="operator">=</span>&quot;com.example.Order&quot;<span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span>id property<span class="operator">=</span>&quot;id&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;order_id&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;status&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;order_status&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&lt;</span><span class="operator">/</span>resultMap<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&lt;</span>resultMap id<span class="operator">=</span>&quot;userResultMap&quot; type<span class="operator">=</span>&quot;com.example.User&quot;<span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span>id property<span class="operator">=</span>&quot;id&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;user_id&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;name&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;user_name&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;age&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;user_age&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span>collection property<span class="operator">=</span>&quot;orders&quot; ofType<span class="operator">=</span>&quot;com.example.Order&quot; resultMap<span class="operator">=</span>&quot;orderResultMap&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&lt;</span><span class="operator">/</span>resultMap<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>collection</code> 元素用于映射集合类型的属性。</li>
</ul>
<h4 id="3-使用嵌套-resultMap"><a href="#3-使用嵌套-resultMap" class="headerlink" title="3. 使用嵌套 resultMap"></a>3. <strong>使用嵌套 <code>resultMap</code></strong></h4><p>你也可以在一个 <code>resultMap</code> 中使用另一个 <code>resultMap</code> 来进行更复杂的映射。例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span>resultMap id<span class="operator">=</span>&quot;orderResultMap&quot; type<span class="operator">=</span>&quot;com.example.Order&quot;<span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span>id property<span class="operator">=</span>&quot;id&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;order_id&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;status&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;order_status&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&lt;</span><span class="operator">/</span>resultMap<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&lt;</span>resultMap id<span class="operator">=</span>&quot;userWithOrdersResultMap&quot; type<span class="operator">=</span>&quot;com.example.User&quot;<span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span>id property<span class="operator">=</span>&quot;id&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;user_id&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;name&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;user_name&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;age&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;user_age&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span>collection property<span class="operator">=</span>&quot;orders&quot; ofType<span class="operator">=</span>&quot;com.example.Order&quot; resultMap<span class="operator">=</span>&quot;orderResultMap&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&lt;</span><span class="operator">/</span>resultMap<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul>
<li><strong><code>&lt;resultMap&gt;</code></strong> 是 MyBatis 中用于将 SQL 查询结果映射到 Java 对象的关键组件。</li>
<li><strong>基本用法</strong> 包括将查询结果的列映射到 Java 对象的属性。</li>
<li><strong>高级用法</strong> 涉及嵌套映射和集合映射，以处理复杂的数据结构。</li>
</ul>
<p>通过正确使用 <code>&lt;resultMap&gt;</code>，你可以将复杂的查询结果高效地映射到 Java 对象中，从而提高应用程序的性能和可维护性。</p>
<h2 id="关于一对一非集合映射"><a href="#关于一对一非集合映射" class="headerlink" title="关于一对一非集合映射"></a>关于一对一非集合映射</h2><p>在MyBatis中，resultMap用于定义如何将数据库查询结果映射到Java对象。对于你的ExamStu类，假设你的数据库表结构与类的字段相对应，以下是一个可能的resultMap配置：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span>resultMap id<span class="operator">=</span>&quot;ExamStuResultMap&quot; type<span class="operator">=</span>&quot;org.example.Server.model.examination.ExamStu&quot;<span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="operator">!</span><span class="comment">-- 映射父类 Exam 的字段 --&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span>id property<span class="operator">=</span>&quot;exam_id&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;exam_id&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;sem_id&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;sem_id&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;paper_id&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;paper_id&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="operator">&lt;</span><span class="operator">!</span><span class="comment">-- 映射 ExamStu 的字段 --&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;stu_exam_id&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;stu_exam_id&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="operator">&lt;</span><span class="operator">!</span><span class="comment">-- 映射 Student 对象 --&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span>association property<span class="operator">=</span>&quot;student&quot; javaType<span class="operator">=</span>&quot;org.example.Server.model.user.Student&quot;<span class="operator">&gt;</span></span><br><span class="line">        <span class="operator">&lt;</span>id property<span class="operator">=</span>&quot;id&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;student_id&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">        <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;username&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;student_username&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">        <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;img_url&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;student_img_url&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">        <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;stu_number&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;student_stu_number&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="operator">/</span>association<span class="operator">&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="operator">&lt;</span><span class="operator">!</span><span class="comment">-- 映射 SemDivisonVO 对象 --&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span>association property<span class="operator">=</span>&quot;semDivison&quot; javaType<span class="operator">=</span>&quot;org.example.Server.model.semester.SemDivisonVO&quot;<span class="operator">&gt;</span></span><br><span class="line">        <span class="operator">&lt;</span>id property<span class="operator">=</span>&quot;division_id&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;division_id&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">        <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;division_name&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;division_name&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="operator">/</span>association<span class="operator">&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="operator">&lt;</span><span class="operator">!</span><span class="comment">-- 映射基本类型字段 --&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;start_time&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;start_time&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;submit_time&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;submit_time&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;mark_status&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;mark_status&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;submit_status&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;submit_status&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>&quot;get_score&quot; <span class="keyword">column</span><span class="operator">=</span>&quot;get_score&quot;<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&lt;</span><span class="operator">/</span>resultMap<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>解释</strong></p>
<ul>
<li><code>&lt;id&gt;</code> 和 <code>&lt;result&gt;</code>标签：用于映射基本类型和字符串类型的字段。</li>
<li><code>&lt;association&gt;</code> 标签：用于映射一对一的关系，例如Student和SemDivisonVO对象。</li>
<li>property 属性：指定Java对象中的属性名。</li>
<li>column 属性：指定数据库表中的列名。</li>
</ul>
<h1 id="2问：sql中的union-all"><a href="#2问：sql中的union-all" class="headerlink" title="2问：sql中的union all"></a>2问：sql中的union all</h1><h2 id="sql中的Union-all"><a href="#sql中的Union-all" class="headerlink" title="sql中的Union all"></a>sql中的Union all</h2><p><code>UNION ALL</code> 是 SQL 中的一个操作符，用于合并多个查询的结果集。它的主要特点包括：</p>
<ol>
<li><p><strong>合并结果</strong>：将多个 <code>SELECT</code> 查询的结果结合在一起，形成一个新的结果集。</p>
</li>
<li><p><strong>包含重复</strong>：与 <code>UNION</code> 不同，<code>UNION ALL</code> 会保留所有的重复记录。也就是说，如果不同的查询返回相同的行，这些行会在最终结果中出现多次。</p>
</li>
<li><p><strong>性能更高</strong>：由于 <code>UNION ALL</code> 不进行重复记录的检查，因此通常比 <code>UNION</code> 更快，适合需要保留所有记录的场景。</p>
</li>
</ol>
<p>总的来说，<code>UNION ALL</code> 是一个有效的工具，用于整合多个查询的结果并保留所有数据。</p>
<h1 id="3问：mybatis如何分类型存放对象（存疑）"><a href="#3问：mybatis如何分类型存放对象（存疑）" class="headerlink" title="3问：mybatis如何分类型存放对象（存疑）"></a>3问：mybatis如何分类型存放对象（存疑）</h1><h2 id="mybatis的复杂嵌套映射select案例"><a href="#mybatis的复杂嵌套映射select案例" class="headerlink" title="mybatis的复杂嵌套映射select案例"></a>mybatis的复杂嵌套映射select案例</h2><p>假设你有一个 <code>Course</code> 表和一个 <code>Resource</code> 表，<code>Resource</code> 表中有一个 <code>type</code> 字段，存储了资源的类型（video、ppt、pdf）。你需要查询每个课程的所有这三类资源的列表。以下是如何在 MyBatis 中实现这一需求的示例。</p>
<h3 id="数据库表结构"><a href="#数据库表结构" class="headerlink" title="数据库表结构"></a>数据库表结构</h3><ol>
<li><p><strong>Course 表</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Course (</span><br><span class="line">    course_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    course_name <span class="type">VARCHAR</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Resource 表</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Resource (</span><br><span class="line">    resource_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    course_id <span class="type">INT</span>,</span><br><span class="line">    type <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    url <span class="type">VARCHAR</span>(<span class="number">255</span>),</span><br><span class="line">    <span class="keyword">FOREIGN</span> KEY (course_id) <span class="keyword">REFERENCES</span> Course(course_id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="MyBatis-映射文件"><a href="#MyBatis-映射文件" class="headerlink" title="MyBatis 映射文件"></a>MyBatis 映射文件</h3><p>假设你的实体类如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Course</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> courseId;</span><br><span class="line">    <span class="keyword">private</span> String courseName;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Resource&gt; videoResources;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Resource&gt; pptResources;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Resource&gt; pdfResources;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Getters and setters</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Resource</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> resourceId;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> courseId;</span><br><span class="line">    <span class="keyword">private</span> String type;</span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Getters and setters</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="MyBatis-映射文件示例"><a href="#MyBatis-映射文件示例" class="headerlink" title="MyBatis 映射文件示例"></a>MyBatis 映射文件示例</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.example.mapper.CourseMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;courseResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Course&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;courseId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;course_id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;courseName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;course_name&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;videoResources&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Resource&quot;</span> <span class="attr">column</span>=<span class="string">&quot;course_id&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;ArrayList&quot;</span> <span class="attr">select</span>=<span class="string">&quot;selectResourcesByType&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">constructor</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">arg</span> <span class="attr">column</span>=<span class="string">&quot;type&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;String&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">constructor</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;pptResources&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Resource&quot;</span> <span class="attr">column</span>=<span class="string">&quot;course_id&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;ArrayList&quot;</span> <span class="attr">select</span>=<span class="string">&quot;selectResourcesByType&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">constructor</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">arg</span> <span class="attr">column</span>=<span class="string">&quot;type&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;String&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">constructor</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;pdfResources&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Resource&quot;</span> <span class="attr">column</span>=<span class="string">&quot;course_id&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;ArrayList&quot;</span> <span class="attr">select</span>=<span class="string">&quot;selectResourcesByType&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">constructor</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">arg</span> <span class="attr">column</span>=<span class="string">&quot;type&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;String&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">constructor</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectCourseWithResources&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;courseResultMap&quot;</span>&gt;</span></span><br><span class="line">        SELECT course_id, course_name</span><br><span class="line">        FROM Course</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectResourcesByType&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Resource&quot;</span>&gt;</span></span><br><span class="line">        SELECT resource_id, course_id, type, url</span><br><span class="line">        FROM Resource</span><br><span class="line">        WHERE course_id = #&#123;course_id&#125; AND type = #&#123;type&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h3><ol>
<li><p><strong><code>courseResultMap</code></strong>:</p>
<ul>
<li>定义了一个 <code>resultMap</code>，将 <code>Course</code> 表的字段映射到 <code>Course</code> 类的属性。</li>
<li>使用 <code>&lt;collection&gt;</code> 标签来映射 <code>videoResources</code>、<code>pptResources</code> 和 <code>pdfResources</code> 属性。</li>
<li>每个 <code>&lt;collection&gt;</code> 标签使用 <code>select</code> 属性调用 <code>selectResourcesByType</code> 方法，并传递 <code>course_id</code> 和 <code>type</code> 参数。</li>
</ul>
</li>
<li><p><strong><code>selectCourseWithResources</code></strong>:</p>
<ul>
<li>查询所有课程的基本信息。</li>
</ul>
</li>
<li><p><strong><code>selectResourcesByType</code></strong>:</p>
<ul>
<li>根据 <code>course_id</code> 和 <code>type</code> 查询特定类型的资源。</li>
</ul>
</li>
</ol>
<h3 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h3><p>在你的服务层或控制器中，你可以这样调用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Course&gt; courses = courseMapper.selectCourseWithResources();</span><br></pre></td></tr></table></figure>

<p>这样，你就可以得到每个课程的视频、PPT 和 PDF 资源列表。</p>
<p>在 MyBatis 中，<code>&lt;collection&gt;</code> 标签用于映射一对多关系，即将一个对象的集合映射到另一个对象的属性中。在你提供的代码片段中，<code>&lt;collection&gt;</code> 标签用于将 <code>Resource</code> 对象的集合映射到 <code>Course</code> 对象的 <code>pdfResources</code> 属性中。</p>
<p>让我们详细解释一下这个标签的各个部分：</p>
<ol>
<li><p><strong><code>property</code></strong>:</p>
<ul>
<li><code>property=&quot;pdfResources&quot;</code>: 这指定了 <code>Course</code> 类中的属性名，即 <code>pdfResources</code>，这个属性将包含所有 PDF 类型的资源。</li>
</ul>
</li>
<li><p><strong><code>ofType</code></strong>:</p>
<ul>
<li><code>ofType=&quot;Resource&quot;</code>: 这指定了集合中元素的类型，即 <code>Resource</code> 类。</li>
</ul>
</li>
<li><p><strong><code>column</code></strong>:</p>
<ul>
<li><code>column=&quot;course_id&quot;</code>: 这指定了传递给嵌套查询的列名，即 <code>course_id</code>。这个列的值将作为参数传递给嵌套查询。</li>
</ul>
</li>
<li><p><strong><code>javaType</code></strong>:</p>
<ul>
<li><code>javaType=&quot;ArrayList&quot;</code>: 这指定了集合的 Java 类型，即 <code>ArrayList</code>。</li>
</ul>
</li>
<li><p><strong><code>select</code></strong>:</p>
<ul>
<li><code>select=&quot;selectResourcesByType&quot;</code>: 这指定了用于获取集合数据的 SQL 查询方法名，即 <code>selectResourcesByType</code>。</li>
</ul>
</li>
<li><p><strong><code>parameterType</code></strong>:</p>
<ul>
<li><code>parameterType=&quot;map&quot;</code>: 这指定了传递给嵌套查询的参数类型，即 <code>map</code>。在这个例子中，<code>map</code> 包含 <code>course_id</code> 和 <code>type</code> 两个键。</li>
</ul>
</li>
<li><p><strong><code>constructor</code></strong>:</p>
<ul>
<li><code>&lt;constructor&gt;</code>: 这表示使用构造函数来创建 <code>Resource</code> 对象。</li>
<li><code>&lt;arg column=&quot;type&quot; javaType=&quot;String&quot;/&gt;</code>: 这表示将 <code>type</code> 列的值传递给 <code>Resource</code> 类的构造函数。</li>
</ul>
</li>
</ol>
<h3 id="嵌套查询示例"><a href="#嵌套查询示例" class="headerlink" title="嵌套查询示例"></a>嵌套查询示例</h3><p>假设 <code>selectResourcesByType</code> 方法定义如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=<span class="string">&quot;selectResourcesByType&quot;</span> resultType=<span class="string">&quot;Resource&quot;</span>&gt;</span><br><span class="line">    SELECT resource_id, course_id, type, url</span><br><span class="line">    FROM Resource</span><br><span class="line">    <span class="type">WHERE</span> <span class="variable">course_id</span> <span class="operator">=</span> #&#123;course_id&#125; <span class="type">AND</span> <span class="variable">type</span> <span class="operator">=</span> #&#123;type&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h3 id="解释-1"><a href="#解释-1" class="headerlink" title="解释"></a>解释</h3><ul>
<li>当 MyBatis 执行 <code>selectCourseWithResources</code> 查询时，它会为每个 <code>Course</code> 对象调用 <code>selectResourcesByType</code> 方法两次，一次传递 <code>type</code> 为 <code>&quot;pdf&quot;</code>，另一次传递 <code>type</code> 为 <code>&quot;ppt&quot;</code>，还有一次传递 <code>type</code> 为 <code>&quot;video&quot;</code>。</li>
<li>每次调用 <code>selectResourcesByType</code> 方法时，它会根据传递的 <code>course_id</code> 和 <code>type</code> 查询相应的资源，并将结果映射到 <code>Resource</code> 对象中。</li>
<li>这些 <code>Resource</code> 对象会被添加到 <code>Course</code> 对象的 <code>pdfResources</code>、<code>pptResources</code> 和 <code>videoResources</code> 属性中。</li>
</ul>
<h3 id="示例数据"><a href="#示例数据" class="headerlink" title="示例数据"></a>示例数据</h3><p>假设 <code>Course</code> 表中有以下数据：</p>
<table>
<thead>
<tr>
<th>course_id</th>
<th>course_name</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>Course A</td>
</tr>
<tr>
<td>2</td>
<td>Course B</td>
</tr>
</tbody></table>
<p><code>Resource</code> 表中有以下数据：</p>
<table>
<thead>
<tr>
<th>resource_id</th>
<th>course_id</th>
<th>type</th>
<th>url</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>1</td>
<td>pdf</td>
<td><a target="_blank" rel="noopener" href="http://example.com/pdf1">http://example.com/pdf1</a></td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>ppt</td>
<td><a target="_blank" rel="noopener" href="http://example.com/ppt1">http://example.com/ppt1</a></td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>video</td>
<td><a target="_blank" rel="noopener" href="http://example.com/video1">http://example.com/video1</a></td>
</tr>
<tr>
<td>4</td>
<td>2</td>
<td>pdf</td>
<td><a target="_blank" rel="noopener" href="http://example.com/pdf2">http://example.com/pdf2</a></td>
</tr>
<tr>
<td>5</td>
<td>2</td>
<td>ppt</td>
<td><a target="_blank" rel="noopener" href="http://example.com/ppt2">http://example.com/ppt2</a></td>
</tr>
<tr>
<td>6</td>
<td>2</td>
<td>video</td>
<td><a target="_blank" rel="noopener" href="http://example.com/video2">http://example.com/video2</a></td>
</tr>
</tbody></table>
<p>执行 <code>selectCourseWithResources</code> 查询后，<code>Course</code> 对象将包含以下资源列表：</p>
<ul>
<li><p><code>Course A</code>:</p>
<ul>
<li><code>pdfResources</code>: [Resource{id&#x3D;1, course_id&#x3D;1, type&#x3D;’pdf’, url&#x3D;’<a target="_blank" rel="noopener" href="http://example.com/pdf1'%7D]">http://example.com/pdf1&#39;}]</a></li>
<li><code>pptResources</code>: [Resource{id&#x3D;2, course_id&#x3D;1, type&#x3D;’ppt’, url&#x3D;’<a target="_blank" rel="noopener" href="http://example.com/ppt1'%7D]">http://example.com/ppt1&#39;}]</a></li>
<li><code>videoResources</code>: [Resource{id&#x3D;3, course_id&#x3D;1, type&#x3D;’video’, url&#x3D;’<a target="_blank" rel="noopener" href="http://example.com/video1'%7D]">http://example.com/video1&#39;}]</a></li>
</ul>
</li>
<li><p><code>Course B</code>:</p>
<ul>
<li><code>pdfResources</code>: [Resource{id&#x3D;4, course_id&#x3D;2, type&#x3D;’pdf’, url&#x3D;’<a target="_blank" rel="noopener" href="http://example.com/pdf2'%7D]">http://example.com/pdf2&#39;}]</a></li>
<li><code>pptResources</code>: [Resource{id&#x3D;5, course_id&#x3D;2, type&#x3D;’ppt’, url&#x3D;’<a target="_blank" rel="noopener" href="http://example.com/ppt2'%7D]">http://example.com/ppt2&#39;}]</a></li>
<li><code>videoResources</code>: [Resource{id&#x3D;6, course_id&#x3D;2, type&#x3D;’video’, url&#x3D;’<a target="_blank" rel="noopener" href="http://example.com/video2'%7D]">http://example.com/video2&#39;}]</a></li>
</ul>
</li>
</ul>
<p>通过这种方式，你可以轻松地将不同类型的资源映射到 <code>Course</code> 对象的不同属性中。</p>
<h1 id="4问：sql中的窗口函数"><a href="#4问：sql中的窗口函数" class="headerlink" title="4问：sql中的窗口函数"></a>4问：sql中的窗口函数</h1><h1 id="mysql的窗口函数"><a href="#mysql的窗口函数" class="headerlink" title="mysql的窗口函数"></a>mysql的窗口函数</h1><p>窗口函数（Window Functions）是SQL查询中的一种高级功能，它允许用户在一个结果集的窗口（即一个子集）上执行计算，而不是在整个结果集上。窗口函数可以用于各种复杂的分析任务，如排名、累计和、移动平均等。</p>
<h3 id="窗口函数的基本概念"><a href="#窗口函数的基本概念" class="headerlink" title="窗口函数的基本概念"></a>窗口函数的基本概念</h3><ol>
<li><p><strong>窗口定义</strong>：窗口函数在一个特定的窗口上操作，这个窗口可以是整个结果集，也可以是结果集的一个子集。窗口可以通过 <code>PARTITION BY</code> 子句进行划分，并通过 <code>ORDER BY</code> 子句进行排序。</p>
</li>
<li><p><strong>常见的窗口函数</strong>：</p>
<ul>
<li><code>ROW_NUMBER()</code>：为每个窗口中的行分配一个唯一的序号。</li>
<li><code>RANK()</code>：为每个窗口中的行分配一个排名，如果有多个行具有相同的值，则它们会获得相同的排名，并且下一个排名会跳过相应的数量。</li>
<li><code>DENSE_RANK()</code>：类似于 <code>RANK()</code>，但不会跳过排名。</li>
<li><code>SUM()</code>, <code>AVG()</code>, <code>MAX()</code>, <code>MIN()</code>：这些聚合函数也可以作为窗口函数使用，计算窗口内的累积和、平均值、最大值和最小值。</li>
</ul>
</li>
</ol>
<h3 id="示例解释"><a href="#示例解释" class="headerlink" title="示例解释"></a>示例解释</h3><p>在你的示例中，使用了 <code>ROW_NUMBER()</code> 窗口函数来为每个用户的评论分配一个序号，按创建时间降序排列：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WITH</span> RankedComments <span class="keyword">AS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">        <span class="operator">*</span>,</span><br><span class="line">        <span class="built_in">ROW_NUMBER</span>() <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> user_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> created_at <span class="keyword">DESC</span>) <span class="keyword">AS</span> rn</span><br><span class="line">    <span class="keyword">FROM</span></span><br><span class="line">        comments</span><br><span class="line">    <span class="keyword">WHERE</span></span><br><span class="line">        topic_id <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong><code>PARTITION BY user_id</code>：将结果集按 <code>user_id</code> 划分为多个窗口。</strong></li>
<li><strong><code>ORDER BY created_at DESC</code>：在每个窗口内按 <code>created_at</code> 降序排列。</strong></li>
<li><strong><code>ROW_NUMBER() OVER (...)</code>：为每个窗口中的行分配一个唯一的序号。</strong></li>
</ul>
<h3 id="窗口函数的常见用途"><a href="#窗口函数的常见用途" class="headerlink" title="窗口函数的常见用途"></a>窗口函数的常见用途</h3><ol>
<li><strong>排名和排序</strong>：如上例所示，可以为行分配排名或序号。</li>
<li><strong>累积和和移动平均</strong>：计算某个指标的累积和或移动平均值。</li>
<li><strong>分组和聚合</strong>：在分组数据上进行复杂的聚合计算。</li>
<li><strong>时间序列分析</strong>：处理时间序列数据，如计算每日、每周或每月的统计数据。</li>
</ol>
<h3 id="是否经常使用"><a href="#是否经常使用" class="headerlink" title="是否经常使用"></a>是否经常使用</h3><p>窗口函数在需要复杂分析和报告的场景中非常有用，特别是在以下情况下：</p>
<ul>
<li>需要对数据进行分组并进行复杂的计算。</li>
<li>需要计算排名、累积和或移动平均值。</li>
<li>需要处理时间序列数据。</li>
</ul>
<p>因此，窗口函数在数据分析和报告任务中经常被使用，尤其是在数据仓库和商业智能（BI）系统中。</p>
<h3 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h3><p>窗口函数提供了一种强大的工具，可以在SQL查询中进行复杂的计算和分析。它们在处理分组数据、计算排名和累积值等方面非常有用，并且在数据分析和报告任务中经常被使用。</p>
<h2 id="例如rank（）"><a href="#例如rank（）" class="headerlink" title="例如rank（）"></a>例如rank（）</h2><p>使用窗口函数进行排名是SQL查询中的一个常见任务。以下是如何使用窗口函数进行排名的基本步骤和示例：</p>
<h3 id="使用-ROW-NUMBER-进行排名"><a href="#使用-ROW-NUMBER-进行排名" class="headerlink" title="使用 ROW_NUMBER() 进行排名"></a>使用 <code>ROW_NUMBER()</code> 进行排名</h3><p><code>ROW_NUMBER()</code> 函数为每个窗口中的行分配一个唯一的序号。它通常与 <code>PARTITION BY</code> 和 <code>ORDER BY</code> 子句一起使用。</p>
<h4 id="示例：按销售额对员工进行排名"><a href="#示例：按销售额对员工进行排名" class="headerlink" title="示例：按销售额对员工进行排名"></a>示例：按销售额对员工进行排名</h4><p>假设我们有一个 <code>sales</code> 表，包含员工的销售额信息：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> sales (</span><br><span class="line">    employee_id <span class="type">INT</span>,</span><br><span class="line">    sale_date <span class="type">DATE</span>,</span><br><span class="line">    amount <span class="type">DECIMAL</span>(<span class="number">10</span>, <span class="number">2</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>我们可以使用 <code>ROW_NUMBER()</code> 函数按销售额对员工进行排名：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WITH</span> RankedSales <span class="keyword">AS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">        employee_id,</span><br><span class="line">        sale_date,</span><br><span class="line">        amount,</span><br><span class="line">        <span class="built_in">ROW_NUMBER</span>() <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> amount <span class="keyword">DESC</span>) <span class="keyword">AS</span> rank</span><br><span class="line">    <span class="keyword">FROM</span></span><br><span class="line">        sales</span><br><span class="line">)</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    employee_id,</span><br><span class="line">    sale_date,</span><br><span class="line">    amount,</span><br><span class="line">    rank</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    RankedSales;</span><br></pre></td></tr></table></figure>

<p>在这个示例中：</p>
<ul>
<li><code>ROW_NUMBER() OVER (ORDER BY amount DESC)</code>：按销售额降序排列，并为每个员工分配一个唯一的排名。</li>
</ul>
<h3 id="使用-RANK-进行排名"><a href="#使用-RANK-进行排名" class="headerlink" title="使用 RANK() 进行排名"></a>使用 <code>RANK()</code> 进行排名</h3><p><code>RANK()</code> 函数为每个窗口中的行分配一个排名，如果有多个行具有相同的值，则它们会获得相同的排名，并且下一个排名会跳过相应的数量。</p>
<h4 id="示例：按销售额对员工进行排名，处理相同销售额的情况"><a href="#示例：按销售额对员工进行排名，处理相同销售额的情况" class="headerlink" title="示例：按销售额对员工进行排名，处理相同销售额的情况"></a>示例：按销售额对员工进行排名，处理相同销售额的情况</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WITH</span> RankedSales <span class="keyword">AS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">        employee_id,</span><br><span class="line">        sale_date,</span><br><span class="line">        amount,</span><br><span class="line">        <span class="built_in">RANK</span>() <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> amount <span class="keyword">DESC</span>) <span class="keyword">AS</span> rank</span><br><span class="line">    <span class="keyword">FROM</span></span><br><span class="line">        sales</span><br><span class="line">)</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    employee_id,</span><br><span class="line">    sale_date,</span><br><span class="line">    amount,</span><br><span class="line">    rank</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    RankedSales;</span><br></pre></td></tr></table></figure>

<p>在这个示例中：</p>
<ul>
<li><code>RANK() OVER (ORDER BY amount DESC)</code>：按销售额降序排列，并为每个员工分配一个排名。如果两个员工的销售额相同，它们会获得相同的排名，并且下一个排名会跳过相应的数量。</li>
</ul>
<h3 id="使用-DENSE-RANK-进行排名"><a href="#使用-DENSE-RANK-进行排名" class="headerlink" title="使用 DENSE_RANK() 进行排名"></a>使用 <code>DENSE_RANK()</code> 进行排名</h3><p><code>DENSE_RANK()</code> 函数类似于 <code>RANK()</code>，但不会跳过排名。</p>
<h4 id="示例：按销售额对员工进行排名，处理相同销售额的情况，不跳过排名"><a href="#示例：按销售额对员工进行排名，处理相同销售额的情况，不跳过排名" class="headerlink" title="示例：按销售额对员工进行排名，处理相同销售额的情况，不跳过排名"></a>示例：按销售额对员工进行排名，处理相同销售额的情况，不跳过排名</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WITH</span> RankedSales <span class="keyword">AS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">        employee_id,</span><br><span class="line">        sale_date,</span><br><span class="line">        amount,</span><br><span class="line">        <span class="built_in">DENSE_RANK</span>() <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> amount <span class="keyword">DESC</span>) <span class="keyword">AS</span> rank</span><br><span class="line">    <span class="keyword">FROM</span></span><br><span class="line">        sales</span><br><span class="line">)</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    employee_id,</span><br><span class="line">    sale_date,</span><br><span class="line">    amount,</span><br><span class="line">    rank</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    RankedSales;</span><br></pre></td></tr></table></figure>

<p>在这个示例中：</p>
<ul>
<li><code>DENSE_RANK() OVER (ORDER BY amount DESC)</code>：按销售额降序排列，并为每个员工分配一个排名。如果两个员工的销售额相同，它们会获得相同的排名，并且下一个排名不会跳过相应的数量。</li>
</ul>
<h3 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h3><ul>
<li><code>ROW_NUMBER()</code>：为每个窗口中的行分配一个唯一的序号。</li>
<li><code>RANK()</code>：为每个窗口中的行分配一个排名，如果有多个行具有相同的值，则它们会获得相同的排名，并且下一个排名会跳过相应的数量。</li>
<li><code>DENSE_RANK()</code>：类似于 <code>RANK()</code>，但不会跳过排名。</li>
</ul>
<p>选择哪种函数取决于具体的需求。如果需要唯一的序号，使用 <code>ROW_NUMBER()</code>；如果需要处理相同值的情况并且希望跳过排名，使用 <code>RANK()</code>；如果需要处理相同值的情况但不希望跳过排名，使用 <code>DENSE_RANK()</code>。</p>
<h1 id="5问：关于Java一些很基础的回炉重造"><a href="#5问：关于Java一些很基础的回炉重造" class="headerlink" title="5问：关于Java一些很基础的回炉重造"></a>5问：关于Java一些很基础的回炉重造</h1><h2 id="Java中的List迭代器"><a href="#Java中的List迭代器" class="headerlink" title="Java中的List迭代器"></a>Java中的List迭代器</h2><p>在Java中，当使用迭代器（Iterator）遍历集合时，直接通过集合的<code>remove</code>方法删除元素可能会导致<code>ConcurrentModificationException</code>异常。这是因为迭代器和集合都在维护一个修改计数器，当迭代器创建时，它会记录集合的修改次数。如果在迭代过程中，集合的修改次数发生了变化（例如，通过集合的<code>remove</code>方法删除元素），迭代器检测到修改次数不一致，就会抛出<code>ConcurrentModificationException</code>异常。</p>
<p>使用迭代器的<code>remove</code>方法删除元素更安全，因为它会在删除元素的同时更新迭代器的修改计数器，以确保迭代器和集合的修改次数保持一致。这样就不会触发<code>ConcurrentModificationException</code>异常。</p>
<p>以下是一个使用迭代器删除元素的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.add(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;C&quot;</span>);</span><br><span class="line"></span><br><span class="line">Iterator&lt;String&gt; iterator = list.iterator();</span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">    <span class="keyword">if</span> (s.equals(<span class="string">&quot;B&quot;</span>)) &#123;</span><br><span class="line">        iterator.remove(); <span class="comment">// 使用迭代器的 remove 方法删除元素</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(list); <span class="comment">// 输出: [A, C]</span></span><br></pre></td></tr></table></figure>

<p>在这个示例中，我们使用迭代器的<code>remove</code>方法删除了元素”B”，而不会导致<code>ConcurrentModificationException</code>异常。</p>
<p>相比之下，以下代码使用集合的<code>remove</code>方法删除元素，会导致<code>ConcurrentModificationException</code>异常：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.add(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;C&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (String s : list) &#123;</span><br><span class="line">    <span class="keyword">if</span> (s.equals(<span class="string">&quot;B&quot;</span>)) &#123;</span><br><span class="line">        list.remove(s); <span class="comment">// 使用集合的 remove 方法删除元素，会导致 ConcurrentModificationException 异常</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总之，使用迭代器的<code>remove</code>方法删除元素更安全，因为它会确保迭代器和集合的修改次数保持一致，从而避免<code>ConcurrentModificationException</code>异常。</p>
<h2 id="关于父类和子类"><a href="#关于父类和子类" class="headerlink" title="关于父类和子类"></a>关于父类和子类</h2><p>是的，你可以将继承了 <code>QsHeader</code> 的类的对象添加到 <code>List&lt;QsHeader&gt;</code> 列表中。这是因为 Java 中的泛型支持协变（covariance），即子类型的对象可以赋值给父类型的引用。</p>
<p>举个例子，假设你有以下类定义：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">QsHeader</span> &#123;</span><br><span class="line">    <span class="comment">// QsHeader 类的定义</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SubQsHeader</span> <span class="keyword">extends</span> <span class="title class_">QsHeader</span> &#123;</span><br><span class="line">    <span class="comment">// SubQsHeader 类的定义，继承自 QsHeader</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>你可以创建一个 <code>List&lt;QsHeader&gt;</code> 列表，并将 <code>SubQsHeader</code> 对象添加到其中：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;QsHeader&gt; qs_list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="type">SubQsHeader</span> <span class="variable">subQsHeader1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SubQsHeader</span>();</span><br><span class="line">        <span class="type">SubQsHeader</span> <span class="variable">subQsHeader2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SubQsHeader</span>();</span><br><span class="line"></span><br><span class="line">        qs_list.add(subQsHeader1);</span><br><span class="line">        qs_list.add(subQsHeader2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 现在 qs_list 包含了两个 SubQsHeader 对象</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在这个例子中，<code>SubQsHeader</code> 是 <code>QsHeader</code> 的子类，因此可以将 <code>SubQsHeader</code> 对象添加到 <code>List&lt;QsHeader&gt;</code> 列表中。</p>
<p>需要注意的是，虽然你可以将子类对象添加到父类类型的列表中，但在从列表中检索对象时，你只能将其视为父类类型。如果你需要访问子类特有的方法或属性，你需要进行类型转换。例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (QsHeader qsHeader : qs_list) &#123;</span><br><span class="line">    <span class="keyword">if</span> (qsHeader <span class="keyword">instanceof</span> SubQsHeader) &#123;</span><br><span class="line">        <span class="type">SubQsHeader</span> <span class="variable">subQsHeader</span> <span class="operator">=</span> (SubQsHeader) qsHeader;</span><br><span class="line">        <span class="comment">// 现在你可以调用 SubQsHeader 特有的方法或属性</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总之，你可以将继承了 <code>QsHeader</code> 的类的对象添加到 <code>List&lt;QsHeader&gt;</code> 列表中，但在使用时需要注意类型转换的问题。</p>
<h1 id="6问：ffmpeg相关：后端处理视频"><a href="#6问：ffmpeg相关：后端处理视频" class="headerlink" title="6问：ffmpeg相关：后端处理视频"></a>6问：ffmpeg相关：后端处理视频</h1><h2 id="如何转码一个前端传来的视频"><a href="#如何转码一个前端传来的视频" class="headerlink" title="如何转码一个前端传来的视频"></a>如何转码一个前端传来的视频</h2><p>如果你希望前端直接上传一个<code>MultipartFile</code>，并在后端进行视频转码和上传到阿里云OSS，可以按照以下步骤进行：</p>
<h3 id="后端处理上传和转码"><a href="#后端处理上传和转码" class="headerlink" title="后端处理上传和转码"></a>后端处理上传和转码</h3><p>后端使用Spring Boot处理文件上传，并调用FFmpeg进行转码，最后上传到阿里云OSS。</p>
<h4 id="服务类示例："><a href="#服务类示例：" class="headerlink" title="服务类示例："></a>服务类示例：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSS;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.model.PutObjectResult;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Files;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Path;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.StandardCopyOption;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VideoService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OSS ossClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.oss.bucket&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String bucketName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">uploadAndTranscodeVideo</span><span class="params">(MultipartFile file, String ossObjectName)</span> <span class="keyword">throws</span> IOException, InterruptedException &#123;</span><br><span class="line">        <span class="comment">// 保存上传的文件到临时位置</span></span><br><span class="line">        <span class="type">Path</span> <span class="variable">tempFile</span> <span class="operator">=</span> Files.createTempFile(<span class="string">&quot;video&quot;</span>, <span class="string">&quot;.mp4&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> (<span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(tempFile.toFile())) &#123;</span><br><span class="line">            fos.write(file.getBytes());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 转码视频</span></span><br><span class="line">        <span class="type">Path</span> <span class="variable">outputFilePath</span> <span class="operator">=</span> Files.createTempFile(<span class="string">&quot;transcoded_&quot;</span>, <span class="string">&quot;.mp4&quot;</span>);</span><br><span class="line">        transcodeVideo(tempFile.toString(), outputFilePath.toString());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 上传转码后的视频到OSS</span></span><br><span class="line">        uploadToOSS(outputFilePath.toFile(), ossObjectName);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 删除临时文件</span></span><br><span class="line">        Files.deleteIfExists(tempFile);</span><br><span class="line">        Files.deleteIfExists(outputFilePath);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">transcodeVideo</span><span class="params">(String inputFilePath, String outputFilePath)</span> <span class="keyword">throws</span> IOException, InterruptedException &#123;</span><br><span class="line">        <span class="comment">// 构建FFmpeg命令</span></span><br><span class="line">        String[] command = &#123;</span><br><span class="line">                <span class="string">&quot;ffmpeg&quot;</span>,</span><br><span class="line">                <span class="string">&quot;-i&quot;</span>, inputFilePath,          <span class="comment">// 输入文件路径</span></span><br><span class="line">                <span class="string">&quot;-c:v&quot;</span>, <span class="string">&quot;libx264&quot;</span>,            <span class="comment">// 视频编码器</span></span><br><span class="line">                <span class="string">&quot;-c:a&quot;</span>, <span class="string">&quot;aac&quot;</span>,                <span class="comment">// 音频编码器</span></span><br><span class="line">                outputFilePath                <span class="comment">// 输出文件路径</span></span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建ProcessBuilder</span></span><br><span class="line">        <span class="type">ProcessBuilder</span> <span class="variable">processBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProcessBuilder</span>(command);</span><br><span class="line">        processBuilder.redirectErrorStream(<span class="literal">true</span>); <span class="comment">// 将错误流合并到标准输出流</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 启动进程</span></span><br><span class="line">        <span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> processBuilder.start();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 读取进程输出</span></span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(process.getInputStream()));</span><br><span class="line">        String line;</span><br><span class="line">        <span class="keyword">while</span> ((line = reader.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            System.out.println(line);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 等待进程完成</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">exitCode</span> <span class="operator">=</span> process.waitFor();</span><br><span class="line">        System.out.println(<span class="string">&quot;FFmpeg process exited with code &quot;</span> + exitCode);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">uploadToOSS</span><span class="params">(File filePath, String ossObjectName)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">PutObjectResult</span> <span class="variable">result</span> <span class="operator">=</span> ossClient.putObject(bucketName, ossObjectName, filePath);</span><br><span class="line">            System.out.println(<span class="string">&quot;File uploaded to OSS: &quot;</span> + result.getETag());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="8问：什么是心跳包"><a href="#8问：什么是心跳包" class="headerlink" title="8问：什么是心跳包"></a>8问：什么是心跳包</h1><h2 id="心跳包"><a href="#心跳包" class="headerlink" title="心跳包"></a>心跳包</h2><h3 id="1-心跳包格式"><a href="#1-心跳包格式" class="headerlink" title="1. 心跳包格式"></a>1. 心跳包格式</h3><p>心跳包通常是一个简单的请求或消息，包含以下基本信息：</p>
<ul>
<li><strong>客户端标识</strong>：唯一标识客户端的ID或token。</li>
<li><strong>时间戳</strong>：当前时间的时间戳，用于检测延迟和连接状态。</li>
<li><strong>随机数或序列号</strong>：用于防止重放攻击和确保消息的唯一性。</li>
</ul>
<p>示例心跳包格式（JSON）：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;clientId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;unique_client_id&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1633072800000</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;nonce&quot;</span><span class="punctuation">:</span> <span class="number">12345</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-发送频率"><a href="#2-发送频率" class="headerlink" title="2. 发送频率"></a>2. 发送频率</h3><p>心跳包的发送频率需要根据具体的应用场景和网络环境来确定。一般来说，可以考虑以下几种策略：</p>
<ul>
<li><strong>固定间隔</strong>：每隔固定的时间间隔发送一次心跳包，例如每30秒或1分钟。</li>
<li><strong>动态调整</strong>：根据网络状况和服务器负载动态调整心跳包的发送频率，以减少网络开销。</li>
</ul>
<h3 id="3-发送方式"><a href="#3-发送方式" class="headerlink" title="3. 发送方式"></a>3. 发送方式</h3><p>心跳包可以通过HTTP请求、WebSocket或其他实时通信协议发送。以下是两种常见的发送方式：</p>
<ul>
<li><strong>HTTP请求</strong>：客户端定期发送HTTP请求到服务器，服务器响应确认消息。</li>
<li><strong>WebSocket</strong>：通过WebSocket连接保持持久连接，客户端定期发送心跳消息，服务器返回确认消息。</li>
</ul>
<h3 id="4-处理逻辑"><a href="#4-处理逻辑" class="headerlink" title="4. 处理逻辑"></a>4. 处理逻辑</h3><p>服务器接收到心跳包后需要进行相应的处理，包括：</p>
<ul>
<li><strong>验证心跳包</strong>：检查客户端标识、时间戳和随机数等信息的有效性。</li>
<li><strong>更新状态</strong>：更新客户端的最后活跃时间，记录连接状态。</li>
<li><strong>响应确认</strong>：返回确认消息，告知客户端心跳包已成功接收。</li>
</ul>
<h3 id="5-超时处理"><a href="#5-超时处理" class="headerlink" title="5. 超时处理"></a>5. 超时处理</h3><p>服务器需要设置一个超时时间，如果在超时时间内未收到客户端的心跳包，则认为连接已断开。超时时间应根据心跳包的发送频率来确定，例如，如果心跳包每30秒发送一次，超时时间可以设置为60秒。</p>
<h3 id="6-重连机制"><a href="#6-重连机制" class="headerlink" title="6. 重连机制"></a>6. 重连机制</h3><p>如果客户端检测到连接断开，需要尝试重新连接。可以采用指数退避算法来避免频繁重连，减少服务器压力。</p>
<h3 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h3><p>以下是一个简单的示例，展示如何在客户端和服务器之间实现心跳机制：</p>
<h4 id="客户端（JavaScript）"><a href="#客户端（JavaScript）" class="headerlink" title="客户端（JavaScript）"></a>客户端（JavaScript）</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sendHeartbeat</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> heartbeat = &#123;</span><br><span class="line">    <span class="attr">clientId</span>: <span class="string">&quot;unique_client_id&quot;</span>,</span><br><span class="line">    <span class="attr">timestamp</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>(),</span><br><span class="line">    <span class="attr">nonce</span>: <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">10000</span>)</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">fetch</span>(<span class="string">&#x27;/api/heartbeat&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(heartbeat)</span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (response.<span class="property">ok</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Heartbeat sent successfully&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to send heartbeat&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error sending heartbeat:&#x27;</span>, error);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">setInterval</span>(sendHeartbeat, <span class="number">30000</span>); <span class="comment">// 每30秒发送一次心跳包</span></span><br></pre></td></tr></table></figure>

<h4 id="服务器（Node-js-Express）"><a href="#服务器（Node-js-Express）" class="headerlink" title="服务器（Node.js + Express）"></a>服务器（Node.js + Express）</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">json</span>());</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/api/heartbeat&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; clientId, timestamp, nonce &#125; = req.<span class="property">body</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 验证心跳包的有效性</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="title function_">isValidHeartbeat</span>(clientId, timestamp, nonce)) &#123;</span><br><span class="line">    <span class="comment">// 更新客户端的最后活跃时间</span></span><br><span class="line">    <span class="title function_">updateClientActivity</span>(clientId);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回确认消息</span></span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">send</span>(<span class="string">&#x27;Heartbeat received&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">400</span>).<span class="title function_">send</span>(<span class="string">&#x27;Invalid heartbeat&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isValidHeartbeat</span>(<span class="params">clientId, timestamp, nonce</span>) &#123;</span><br><span class="line">  <span class="comment">// 验证逻辑</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">updateClientActivity</span>(<span class="params">clientId</span>) &#123;</span><br><span class="line">  <span class="comment">// 更新客户端活跃时间</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Server is running on port 3000&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="服务器（springboot）"><a href="#服务器（springboot）" class="headerlink" title="服务器（springboot）"></a>服务器（springboot）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.ResponseEntity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HeartbeatController</span> &#123;</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> ClientActivityRepository clientActivityRepository;</span><br><span class="line"></span><br><span class="line"><span class="meta">@PostMapping(&quot;/heartbeat&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title function_">receiveHeartbeat</span><span class="params">(<span class="meta">@RequestBody</span> HeartbeatRequest request)</span> &#123;</span><br><span class="line">    <span class="comment">// 验证心跳包的有效性</span></span><br><span class="line">    <span class="keyword">if</span> (isValidHeartbeat(request.getClientId(), request.getTimestamp(), request.getNonce())) &#123;</span><br><span class="line">        <span class="comment">// 更新客户端的最后活跃时间</span></span><br><span class="line">        updateClientActivity(request.getClientId());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 返回确认消息</span></span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(<span class="string">&quot;Heartbeat received&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.badRequest().body(<span class="string">&quot;Invalid heartbeat&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isValidHeartbeat</span><span class="params">(String clientId, <span class="type">long</span> timestamp, <span class="type">int</span> nonce)</span> &#123;</span><br><span class="line">    <span class="comment">// 验证客户端是否存在</span></span><br><span class="line">    <span class="type">ClientActivity</span> <span class="variable">clientActivity</span> <span class="operator">=</span> clientActivityRepository.findById(clientId).orElse(<span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">if</span> (clientActivity == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 验证时间戳是否合理（例如，检查时间戳是否在合理的时间范围内）</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">currentTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="type">long</span> <span class="variable">timeDifference</span> <span class="operator">=</span> currentTime - timestamp;</span><br><span class="line">    <span class="keyword">if</span> (timeDifference &gt; <span class="number">60000</span>) &#123; <span class="comment">// 1分钟</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 验证nonce是否唯一（简单示例，实际应用中可能需要更复杂的逻辑）</span></span><br><span class="line">    <span class="comment">// 这里假设nonce在10000以内是唯一的</span></span><br><span class="line">    <span class="keyword">if</span> (nonce &lt; <span class="number">0</span> || nonce &gt;= <span class="number">10000</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">updateClientActivity</span><span class="params">(String clientId)</span> &#123;</span><br><span class="line">    <span class="type">ClientActivity</span> <span class="variable">clientActivity</span> <span class="operator">=</span> clientActivityRepository.findById(clientId).orElse(<span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">if</span> (clientActivity == <span class="literal">null</span>) &#123;</span><br><span class="line">        clientActivity = <span class="keyword">new</span> <span class="title class_">ClientActivity</span>();</span><br><span class="line">        clientActivity.setClientId(clientId);</span><br><span class="line">    &#125;</span><br><span class="line">    clientActivity.setLastActiveTime(System.currentTimeMillis());</span><br><span class="line">    clientActivityRepository.save(clientActivity);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="总结-3"><a href="#总结-3" class="headerlink" title="总结"></a>总结</h3><p>设计心跳包时需要综合考虑心跳包的格式、发送频率、处理逻辑、超时处理和重连机制等因素。通过合理的心跳机制设计，可以有效维护客户端与服务器之间的连接状态，提高系统的稳定性和可靠性。</p>
<h1 id="9问：git使用查缺补漏"><a href="#9问：git使用查缺补漏" class="headerlink" title="9问：git使用查缺补漏"></a>9问：git使用查缺补漏</h1><h2 id="隐藏更改的用途"><a href="#隐藏更改的用途" class="headerlink" title="隐藏更改的用途"></a>隐藏更改的用途</h2><p>隐藏更改（如使用 <code>git stash</code>）通常在以下几种场景中应用：</p>
<h3 id="1-临时切换分支"><a href="#1-临时切换分支" class="headerlink" title="1. 临时切换分支"></a>1. <strong>临时切换分支</strong></h3><p>当你在一个特性分支上工作，但需要临时切换到另一个分支进行紧急修复或查看其他代码时，可以使用 <code>git stash</code> 来保存当前的更改，切换分支后再恢复这些更改。</p>
<h3 id="2-处理合并冲突"><a href="#2-处理合并冲突" class="headerlink" title="2. 处理合并冲突"></a>2. <strong>处理合并冲突</strong></h3><p>在解决合并冲突时，如果你发现需要暂时放弃当前工作以处理其他任务，可以将未完成的修改存储起来，待合并冲突解决后再恢复。</p>
<h3 id="3-清理工作区"><a href="#3-清理工作区" class="headerlink" title="3. 清理工作区"></a>3. <strong>清理工作区</strong></h3><p>如果你的工作区有很多未提交的更改，但你需要进行测试或查看其他文件，不想提交这些更改，可以选择先隐藏它们。</p>
<h3 id="4-多任务处理"><a href="#4-多任务处理" class="headerlink" title="4. 多任务处理"></a>4. <strong>多任务处理</strong></h3><p>在进行多个任务时，你可能会同时有多个未完成的更改。使用 <code>git stash</code> 可以帮助你在不同任务之间快速切换，而不需要每次都提交或丢弃你的工作。</p>
<h3 id="5-试验新代码"><a href="#5-试验新代码" class="headerlink" title="5. 试验新代码"></a>5. <strong>试验新代码</strong></h3><p>如果你想尝试一些实验性的代码修改，但又不想干扰到当前的工作流程，可以将当前的更改隐藏，然后进行实验，最后决定是否恢复这些更改。</p>
<h3 id="应用示例"><a href="#应用示例" class="headerlink" title="应用示例"></a>应用示例</h3><h4 id="临时切换分支"><a href="#临时切换分支" class="headerlink" title="临时切换分支"></a>临时切换分支</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 保存当前更改</span></span><br><span class="line">git stash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换分支</span></span><br><span class="line">git checkout main</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行其他操作...</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 回到原分支</span></span><br><span class="line">git checkout feature-branch</span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复之前的更改</span></span><br><span class="line">git stash pop</span><br></pre></td></tr></table></figure>

<h3 id="总结-4"><a href="#总结-4" class="headerlink" title="总结"></a>总结</h3><p>隐藏更改是一种灵活的方式，可以帮助开发者有效管理工作区的状态，特别是在需要频繁切换任务或处理中断时。通过合理使用 <code>git stash</code>，可以提高工作效率，保持代码库的整洁状态。</p>
<h1 id="10问：node-js到底是什么"><a href="#10问：node-js到底是什么" class="headerlink" title="10问：node.js到底是什么"></a>10问：node.js到底是什么</h1><p>在使用Vue.js进行前端开发时，通常不需要直接下载Node.js。Vue.js是一个前端JavaScript框架，可以直接在浏览器中运行，不需要Node.js环境。然而，对于大多数现代前端项目，尤其是使用Vue CLI创建的项目，Node.js是必需的，原因如下：</p>
<ol>
<li><p><strong>包管理</strong>：Node.js提供了一个包管理器npm（Node Package Manager），它允许开发者轻松地安装、更新和管理项目所需的依赖库。Vue CLI使用npm来安装Vue.js及其相关依赖。</p>
</li>
<li><p><strong>构建工具</strong>：Vue CLI使用Webpack或Vite等构建工具来打包项目资源，这些工具需要Node.js环境来运行。构建工具可以将Vue组件、JavaScript、CSS和其他资源转换成浏览器可以理解的格式，并进行优化。</p>
</li>
<li><p><strong>开发服务器</strong>：Vue CLI提供了一个开发服务器，它可以在本地运行项目，并支持热重载等功能。这个服务器也是基于Node.js构建的。</p>
</li>
<li><p><strong>脚本执行</strong>：在<code>package.json</code>文件中，你可以定义一系列的脚本命令，如运行开发服务器、构建生产版本等。这些脚本需要Node.js来执行。</p>
</li>
<li><p><strong>插件系统</strong>：Vue CLI支持插件系统，允许开发者扩展项目的功能。这些插件通常也是基于Node.js开发的。</p>
</li>
</ol>
<p>因此，虽然Vue.js本身不需要Node.js，但为了使用Vue CLI、管理依赖、构建项目和运行开发服务器等，你需要安装Node.js。通常，Vue CLI会在初始化项目时检查Node.js的版本，并给出推荐的版本范围。</p>
<h1 id="11问：vue-cli和create-vue"><a href="#11问：vue-cli和create-vue" class="headerlink" title="11问：vue-cli和create-vue"></a>11问：vue-cli和create-vue</h1><p>Vue CLI 和 Create Vue 都是用于创建 Vue.js 项目的工具，但它们使用的构建工具不同。Vue CLI 默认使用 Webpack 作为构建工具，而 Create Vue 是 Vue 3 的专用脚手架，使用 Vite 作为构建工具。</p>
<h3 id="Vue-CLI-和-Webpack-的关系"><a href="#Vue-CLI-和-Webpack-的关系" class="headerlink" title="Vue CLI 和 Webpack 的关系"></a>Vue CLI 和 Webpack 的关系</h3><ul>
<li><strong>Vue CLI</strong>：Vue CLI 是一个基于 Vue.js 的项目脚手架，它默认使用 Webpack 来处理项目的构建任务。Vue CLI 提供了一个命令行界面，允许开发者快速搭建 Vue 项目框架，并集成了项目配置、插件系统、预设等多种功能。</li>
</ul>
<h3 id="Create-Vue-和-Vite-的关系"><a href="#Create-Vue-和-Vite-的关系" class="headerlink" title="Create Vue 和 Vite 的关系"></a>Create Vue 和 Vite 的关系</h3><ul>
<li><strong>Create Vue</strong>：Create Vue 是 Vue 3 的专用脚手架，它使用 Vite 作为构建工具。Vite 是一个基于原生 ES Module 的现代前端构建工具，它利用浏览器原生 ES Module 支持来提供快速的开发体验。</li>
</ul>
<p>总的来说，Vue CLI 和 Create Vue 都是为了简化 Vue.js 项目的开发而创建的脚手架工具，只是它们使用的构建工具不同。Vue CLI 使用 Webpack，而 Create Vue 使用 Vite。</p>
<h1 id="12问：js中的解构赋值是什么"><a href="#12问：js中的解构赋值是什么" class="headerlink" title="12问：js中的解构赋值是什么"></a>12问：js中的解构赋值是什么</h1><p>解构赋值（Destructuring Assignment）是一种在 JavaScript（以及 TypeScript 和其他一些基于 ECMAScript 的语言）中从数组或对象中提取数据，并将这些数据赋值给变量的简洁方法。它可以将复杂的数据结构分解为更简单的部分，使得代码更加清晰和易于理解。</p>
<h3 id="数组解构"><a href="#数组解构" class="headerlink" title="数组解构"></a>数组解构</h3><p>数组解构允许你从数组中提取值，并将它们赋值给变量。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> [a, b, c] = numbers;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// 输出: 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// 输出: 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c); <span class="comment">// 输出: 3</span></span><br></pre></td></tr></table></figure>

<p>在这个例子中，<code>numbers</code> 数组中的元素被解构并分别赋值给了变量 <code>a</code>、<code>b</code> 和 <code>c</code>。</p>
<h3 id="对象解构"><a href="#对象解构" class="headerlink" title="对象解构"></a>对象解构</h3><p>对象解构允许你从对象中提取属性，并将它们赋值给变量。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123; <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> &#123; name, age &#125; = person;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">// 输出: Alice</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(age); <span class="comment">// 输出: 25</span></span><br></pre></td></tr></table></figure>

<p>在这个例子中，<code>person</code> 对象中的属性 <code>name</code> 和 <code>age</code> 被解构并分别赋值给了变量 <code>name</code> 和 <code>age</code>。</p>
<h3 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h3><p>解构赋值时，可以为变量提供默认值，以防在解构过程中对应的值不存在。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; name = <span class="string">&#x27;Guest&#x27;</span>, age = <span class="number">30</span> &#125; = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">// 输出: Guest</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(age); <span class="comment">// 输出: 30</span></span><br></pre></td></tr></table></figure>

<p>在这个例子中，由于解构的对象是空的，所以变量 <code>name</code> 和 <code>age</code> 分别被赋予了默认值 <code>&#39;Guest&#39;</code> 和 <code>30</code>。</p>
<h3 id="嵌套解构"><a href="#嵌套解构" class="headerlink" title="嵌套解构"></a>嵌套解构</h3><p>解构赋值也支持嵌套结构，可以提取嵌套数组或对象中的数据。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">profile</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Bob&#x27;</span>,</span><br><span class="line">    <span class="attr">address</span>: &#123;</span><br><span class="line">      <span class="attr">city</span>: <span class="string">&#x27;New York&#x27;</span>,</span><br><span class="line">      <span class="attr">country</span>: <span class="string">&#x27;USA&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  <span class="attr">profile</span>: &#123; name, <span class="attr">address</span>: &#123; city &#125; &#125;</span><br><span class="line">&#125; = user;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">// 输出: Bob</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(city); <span class="comment">// 输出: New York</span></span><br></pre></td></tr></table></figure>

<p>在这个例子中，我们从 <code>user</code> 对象中解构出了嵌套的 <code>name</code> 和 <code>city</code> 属性。</p>
<p>解构赋值是一种非常实用的特性，它可以简化代码，提高代码的可读性和可维护性。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://OrangeLin2312.github.io">OrangeLin2312</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://orangelin2312.github.io/2024/12/02/AI%E7%99%BE%E9%97%AE/">https://orangelin2312.github.io/2024/12/02/AI%E7%99%BE%E9%97%AE/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://OrangeLin2312.github.io" target="_blank">蒜头王八的个人博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/ai%E8%A7%A3%E7%AD%94/">ai解答</a><a class="post-meta__tags" href="/tags/%E8%85%BE%E8%AE%AF%E5%85%83%E5%AE%9D/">腾讯元宝</a></div><div class="post-share"><div class="social-share" data-image="/images/banner3.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/12/07/%E5%AD%A6%E4%B9%A0%E5%89%8D%E7%AB%AF3%E4%BB%B6%E5%A5%97/" title="学习前端3件套"><img class="cover" src="/images/img1.jpg" onerror="onerror=null;src='/images/xhx8.png'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">学习前端3件套</div></div><div class="info-2"><div class="info-item-1">  display:griddisplay：grid是怎么用display: grid; 是 CSS 中的一个属性值，用于创建一个二维布局系统，允许你通过行和列来组织页面上的元素。以下是如何使用 display: grid; 的基本步骤： 1. 设置容器首先，你需要选择一个容器元素，并将其 display 属性设置为 grid 或 inline-grid。grid 会使容器占据整个宽度，而 inline-grid 会使容器仅占据必要的宽度。 123.container &#123;  display: grid;&#125;  2. 定义网格模板接下来，你需要定义网格的行和列。这可以通过 grid-template-columns 和 grid-template-rows 属性来完成。 12345.container &#123;  display: grid;  grid-template-columns: 100px 100px 100px; /* 定义三列，每列宽度为100px */  grid-template-rows: 50px 50px; /*...</div></div></div></a><a class="pagination-related" href="/2024/11/28/Go%E8%AF%AD%E8%A8%80%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%B8%8E%E5%BA%94%E7%94%A8%EF%BC%88%E5%81%8F%E5%90%8E%E7%AB%AF)/" title="Go语言的学习与应用（偏后端)"><img class="cover" src="/images/banner.webp" onerror="onerror=null;src='/images/xhx8.png'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Go语言的学习与应用（偏后端)</div></div><div class="info-2"><div class="info-item-1">Go语言的学习与应用（偏后端)golang的中文文档网址http://studygolang.com/pkgdoc go语言的入门01 认识它12go build ***.go//进行编译，生存程序exe再运行go run ***.go//直接进行编译运行  02 数据类型准备工作 必须引入main包 import导入“头文件”  12package mainimport &quot;fmt&quot;  赋值 注意：变量声明了，就一定要用不然会报错 &#x3D;是赋值，:&#x3D;是声明自动推导变量  123456789101112var a int//没有初始化默认为0var a,b intvar c=10d:=30//类型推导，很常用,只能对同一个变量名使用一次d=20var&#123;    a int    b float64&#125;    Println和Printf Println是换行  Printf可以格式化 123a,b:=...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2024/12/09/%E5%85%B3%E4%BA%8EHexo/" title="关于Hexo"><img class="cover" src="/images/img1.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-09</div><div class="info-item-2">关于Hexo</div></div><div class="info-2"><div class="info-item-1">hexo的cdn和pjax是拿来干嘛的Hexo 是一个快速、简单且强大的博客框架，它使用 Markdown（或其他渲染引擎）解析文章，并通过主题系统生成静态网站。CDN 和 PJAX 是两种不同的技术，它们可以一起使用来提高网站的性能和用户体验。  CDN（内容分发网络）：CDN 是一种分布式网络系统，它的主要作用是通过缓存网站内容在多个服务器上，从而减少用户访问网站时的延迟。当用户请求某个资源时，CDN 会根据用户的地理位置选择最近的服务器来提供服务，这样可以加快页面加载速度，提高用户体验。  在 Hexo 中，你可以将静态资源（如图片、CSS 和 JavaScript 文件）托管到 CDN 上，以提高网站的加载速度。通常，你需要在主题的配置文件中设置 CDN 地址，然后在构建和部署网站时，将静态资源上传到 CDN。  PJAX（PushState + AJAX）：PJAX 是一种优化网站导航的技术，它结合了 HTML5 的 PushState API 和 AJAX 请求。通过 PJAX，当用户在网站上点击链接时，页面的内容会通过 AJAX...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/images/dog.jpg" onerror="this.onerror=null;this.src='/images/xhx.gif'" alt="avatar"/></div><div class="author-info-name">OrangeLin2312</div><div class="author-info-description">欢迎来到我的第五次元</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">14</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/OrangeLin2312"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/OrangeLin2312" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="/1471199572@qq.com" target="_blank" title="Email"><i class="fab pen-nib" style="color: #f37f20;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content"><div>甲乙丙丁四个小伙伴一起去坐车，结果只有甲上了车，其他三个都没上去，为什么呢？因为这是一辆装甲车。</div> <div>这时又来了一辆车，乙和丙上了车，丁却没有上去，因为这是一辆卡丁车。</div> <div>甲乙丙丁在雨天淋了雨，只有丙发烧 为什么 因为烧饼</div> <div>一皇帝上早朝对大臣说：孤的胜，你们都看在眼里，孤的败，然后就下朝了。。。</div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1%E9%97%AE%EF%BC%9Amybatis%E6%98%A0%E5%B0%84%E9%82%A3%E4%BA%9B%E4%BA%8B%E6%83%85"><span class="toc-number">1.</span> <span class="toc-text">1问：mybatis映射那些事情</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis-%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="toc-number">1.1.</span> <span class="toc-text">MyBatis &lt;resultMap&gt;的使用方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-number">1.1.1.</span> <span class="toc-text">基本用法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AE%9A%E4%B9%89-resultMap"><span class="toc-number">1.1.1.1.</span> <span class="toc-text">1. 定义 resultMap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8-resultMap"><span class="toc-number">1.1.1.2.</span> <span class="toc-text">2. 使用 resultMap</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95"><span class="toc-number">1.1.2.</span> <span class="toc-text">高级用法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%B5%8C%E5%A5%97%E6%98%A0%E5%B0%84"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">1. 嵌套映射</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E9%9B%86%E5%90%88%E6%98%A0%E5%B0%84"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">2. 集合映射</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8%E5%B5%8C%E5%A5%97-resultMap"><span class="toc-number">1.1.2.3.</span> <span class="toc-text">3. 使用嵌套 resultMap</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.1.3.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E4%B8%80%E5%AF%B9%E4%B8%80%E9%9D%9E%E9%9B%86%E5%90%88%E6%98%A0%E5%B0%84"><span class="toc-number">1.2.</span> <span class="toc-text">关于一对一非集合映射</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2%E9%97%AE%EF%BC%9Asql%E4%B8%AD%E7%9A%84union-all"><span class="toc-number">2.</span> <span class="toc-text">2问：sql中的union all</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#sql%E4%B8%AD%E7%9A%84Union-all"><span class="toc-number">2.1.</span> <span class="toc-text">sql中的Union all</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3%E9%97%AE%EF%BC%9Amybatis%E5%A6%82%E4%BD%95%E5%88%86%E7%B1%BB%E5%9E%8B%E5%AD%98%E6%94%BE%E5%AF%B9%E8%B1%A1%EF%BC%88%E5%AD%98%E7%96%91%EF%BC%89"><span class="toc-number">3.</span> <span class="toc-text">3问：mybatis如何分类型存放对象（存疑）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#mybatis%E7%9A%84%E5%A4%8D%E6%9D%82%E5%B5%8C%E5%A5%97%E6%98%A0%E5%B0%84select%E6%A1%88%E4%BE%8B"><span class="toc-number">3.1.</span> <span class="toc-text">mybatis的复杂嵌套映射select案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">3.1.1.</span> <span class="toc-text">数据库表结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MyBatis-%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6"><span class="toc-number">3.1.2.</span> <span class="toc-text">MyBatis 映射文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MyBatis-%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.1.3.</span> <span class="toc-text">MyBatis 映射文件示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E9%87%8A"><span class="toc-number">3.1.4.</span> <span class="toc-text">解释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.1.5.</span> <span class="toc-text">使用示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B5%8C%E5%A5%97%E6%9F%A5%E8%AF%A2%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.1.6.</span> <span class="toc-text">嵌套查询示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E9%87%8A-1"><span class="toc-number">3.1.7.</span> <span class="toc-text">解释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E6%95%B0%E6%8D%AE"><span class="toc-number">3.1.8.</span> <span class="toc-text">示例数据</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4%E9%97%AE%EF%BC%9Asql%E4%B8%AD%E7%9A%84%E7%AA%97%E5%8F%A3%E5%87%BD%E6%95%B0"><span class="toc-number">4.</span> <span class="toc-text">4问：sql中的窗口函数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mysql%E7%9A%84%E7%AA%97%E5%8F%A3%E5%87%BD%E6%95%B0"><span class="toc-number">5.</span> <span class="toc-text">mysql的窗口函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AA%97%E5%8F%A3%E5%87%BD%E6%95%B0%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">5.0.1.</span> <span class="toc-text">窗口函数的基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E8%A7%A3%E9%87%8A"><span class="toc-number">5.0.2.</span> <span class="toc-text">示例解释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AA%97%E5%8F%A3%E5%87%BD%E6%95%B0%E7%9A%84%E5%B8%B8%E8%A7%81%E7%94%A8%E9%80%94"><span class="toc-number">5.0.3.</span> <span class="toc-text">窗口函数的常见用途</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%AF%E5%90%A6%E7%BB%8F%E5%B8%B8%E4%BD%BF%E7%94%A8"><span class="toc-number">5.0.4.</span> <span class="toc-text">是否经常使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-1"><span class="toc-number">5.0.5.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%8B%E5%A6%82rank%EF%BC%88%EF%BC%89"><span class="toc-number">5.1.</span> <span class="toc-text">例如rank（）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-ROW-NUMBER-%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%90%8D"><span class="toc-number">5.1.1.</span> <span class="toc-text">使用 ROW_NUMBER() 进行排名</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%9A%E6%8C%89%E9%94%80%E5%94%AE%E9%A2%9D%E5%AF%B9%E5%91%98%E5%B7%A5%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%90%8D"><span class="toc-number">5.1.1.1.</span> <span class="toc-text">示例：按销售额对员工进行排名</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-RANK-%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%90%8D"><span class="toc-number">5.1.2.</span> <span class="toc-text">使用 RANK() 进行排名</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%9A%E6%8C%89%E9%94%80%E5%94%AE%E9%A2%9D%E5%AF%B9%E5%91%98%E5%B7%A5%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%90%8D%EF%BC%8C%E5%A4%84%E7%90%86%E7%9B%B8%E5%90%8C%E9%94%80%E5%94%AE%E9%A2%9D%E7%9A%84%E6%83%85%E5%86%B5"><span class="toc-number">5.1.2.1.</span> <span class="toc-text">示例：按销售额对员工进行排名，处理相同销售额的情况</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-DENSE-RANK-%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%90%8D"><span class="toc-number">5.1.3.</span> <span class="toc-text">使用 DENSE_RANK() 进行排名</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%9A%E6%8C%89%E9%94%80%E5%94%AE%E9%A2%9D%E5%AF%B9%E5%91%98%E5%B7%A5%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%90%8D%EF%BC%8C%E5%A4%84%E7%90%86%E7%9B%B8%E5%90%8C%E9%94%80%E5%94%AE%E9%A2%9D%E7%9A%84%E6%83%85%E5%86%B5%EF%BC%8C%E4%B8%8D%E8%B7%B3%E8%BF%87%E6%8E%92%E5%90%8D"><span class="toc-number">5.1.3.1.</span> <span class="toc-text">示例：按销售额对员工进行排名，处理相同销售额的情况，不跳过排名</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-2"><span class="toc-number">5.1.4.</span> <span class="toc-text">总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5%E9%97%AE%EF%BC%9A%E5%85%B3%E4%BA%8EJava%E4%B8%80%E4%BA%9B%E5%BE%88%E5%9F%BA%E7%A1%80%E7%9A%84%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0"><span class="toc-number">6.</span> <span class="toc-text">5问：关于Java一些很基础的回炉重造</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Java%E4%B8%AD%E7%9A%84List%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="toc-number">6.1.</span> <span class="toc-text">Java中的List迭代器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E7%88%B6%E7%B1%BB%E5%92%8C%E5%AD%90%E7%B1%BB"><span class="toc-number">6.2.</span> <span class="toc-text">关于父类和子类</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6%E9%97%AE%EF%BC%9Affmpeg%E7%9B%B8%E5%85%B3%EF%BC%9A%E5%90%8E%E7%AB%AF%E5%A4%84%E7%90%86%E8%A7%86%E9%A2%91"><span class="toc-number">7.</span> <span class="toc-text">6问：ffmpeg相关：后端处理视频</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%BD%AC%E7%A0%81%E4%B8%80%E4%B8%AA%E5%89%8D%E7%AB%AF%E4%BC%A0%E6%9D%A5%E7%9A%84%E8%A7%86%E9%A2%91"><span class="toc-number">7.1.</span> <span class="toc-text">如何转码一个前端传来的视频</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E7%AB%AF%E5%A4%84%E7%90%86%E4%B8%8A%E4%BC%A0%E5%92%8C%E8%BD%AC%E7%A0%81"><span class="toc-number">7.1.1.</span> <span class="toc-text">后端处理上传和转码</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E7%B1%BB%E7%A4%BA%E4%BE%8B%EF%BC%9A"><span class="toc-number">7.1.1.1.</span> <span class="toc-text">服务类示例：</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8%E9%97%AE%EF%BC%9A%E4%BB%80%E4%B9%88%E6%98%AF%E5%BF%83%E8%B7%B3%E5%8C%85"><span class="toc-number">8.</span> <span class="toc-text">8问：什么是心跳包</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BF%83%E8%B7%B3%E5%8C%85"><span class="toc-number">8.1.</span> <span class="toc-text">心跳包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%BF%83%E8%B7%B3%E5%8C%85%E6%A0%BC%E5%BC%8F"><span class="toc-number">8.1.1.</span> <span class="toc-text">1. 心跳包格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%8F%91%E9%80%81%E9%A2%91%E7%8E%87"><span class="toc-number">8.1.2.</span> <span class="toc-text">2. 发送频率</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%8F%91%E9%80%81%E6%96%B9%E5%BC%8F"><span class="toc-number">8.1.3.</span> <span class="toc-text">3. 发送方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%A4%84%E7%90%86%E9%80%BB%E8%BE%91"><span class="toc-number">8.1.4.</span> <span class="toc-text">4. 处理逻辑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E8%B6%85%E6%97%B6%E5%A4%84%E7%90%86"><span class="toc-number">8.1.5.</span> <span class="toc-text">5. 超时处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E9%87%8D%E8%BF%9E%E6%9C%BA%E5%88%B6"><span class="toc-number">8.1.6.</span> <span class="toc-text">6. 重连机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-number">8.1.7.</span> <span class="toc-text">示例代码</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%88JavaScript%EF%BC%89"><span class="toc-number">8.1.7.1.</span> <span class="toc-text">客户端（JavaScript）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%88Node-js-Express%EF%BC%89"><span class="toc-number">8.1.7.2.</span> <span class="toc-text">服务器（Node.js + Express）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%88springboot%EF%BC%89"><span class="toc-number">8.1.7.3.</span> <span class="toc-text">服务器（springboot）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-3"><span class="toc-number">8.1.8.</span> <span class="toc-text">总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9%E9%97%AE%EF%BC%9Agit%E4%BD%BF%E7%94%A8%E6%9F%A5%E7%BC%BA%E8%A1%A5%E6%BC%8F"><span class="toc-number">9.</span> <span class="toc-text">9问：git使用查缺补漏</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9A%90%E8%97%8F%E6%9B%B4%E6%94%B9%E7%9A%84%E7%94%A8%E9%80%94"><span class="toc-number">9.1.</span> <span class="toc-text">隐藏更改的用途</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%B8%B4%E6%97%B6%E5%88%87%E6%8D%A2%E5%88%86%E6%94%AF"><span class="toc-number">9.1.1.</span> <span class="toc-text">1. 临时切换分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%A4%84%E7%90%86%E5%90%88%E5%B9%B6%E5%86%B2%E7%AA%81"><span class="toc-number">9.1.2.</span> <span class="toc-text">2. 处理合并冲突</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%B8%85%E7%90%86%E5%B7%A5%E4%BD%9C%E5%8C%BA"><span class="toc-number">9.1.3.</span> <span class="toc-text">3. 清理工作区</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%A4%84%E7%90%86"><span class="toc-number">9.1.4.</span> <span class="toc-text">4. 多任务处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E8%AF%95%E9%AA%8C%E6%96%B0%E4%BB%A3%E7%A0%81"><span class="toc-number">9.1.5.</span> <span class="toc-text">5. 试验新代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="toc-number">9.1.6.</span> <span class="toc-text">应用示例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%B4%E6%97%B6%E5%88%87%E6%8D%A2%E5%88%86%E6%94%AF"><span class="toc-number">9.1.6.1.</span> <span class="toc-text">临时切换分支</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-4"><span class="toc-number">9.1.7.</span> <span class="toc-text">总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10%E9%97%AE%EF%BC%9Anode-js%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">10.</span> <span class="toc-text">10问：node.js到底是什么</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11%E9%97%AE%EF%BC%9Avue-cli%E5%92%8Ccreate-vue"><span class="toc-number">11.</span> <span class="toc-text">11问：vue-cli和create-vue</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue-CLI-%E5%92%8C-Webpack-%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">11.0.1.</span> <span class="toc-text">Vue CLI 和 Webpack 的关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-Vue-%E5%92%8C-Vite-%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">11.0.2.</span> <span class="toc-text">Create Vue 和 Vite 的关系</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#12%E9%97%AE%EF%BC%9Ajs%E4%B8%AD%E7%9A%84%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">12.</span> <span class="toc-text">12问：js中的解构赋值是什么</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E8%A7%A3%E6%9E%84"><span class="toc-number">12.0.1.</span> <span class="toc-text">数组解构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E8%A7%A3%E6%9E%84"><span class="toc-number">12.0.2.</span> <span class="toc-text">对象解构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-number">12.0.3.</span> <span class="toc-text">默认值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B5%8C%E5%A5%97%E8%A7%A3%E6%9E%84"><span class="toc-number">12.0.4.</span> <span class="toc-text">嵌套解构</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/12/09/%E5%85%B3%E4%BA%8EHexo/" title="关于Hexo"><img src="/images/img1.jpg" onerror="this.onerror=null;this.src='/images/xhx8.png'" alt="关于Hexo"/></a><div class="content"><a class="title" href="/2024/12/09/%E5%85%B3%E4%BA%8EHexo/" title="关于Hexo">关于Hexo</a><time datetime="2024-12-09T12:41:14.000Z" title="发表于 2024-12-09 20:41:14">2024-12-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/07/%E5%AD%A6%E4%B9%A0%E5%89%8D%E7%AB%AF3%E4%BB%B6%E5%A5%97/" title="学习前端3件套"><img src="/images/img1.jpg" onerror="this.onerror=null;this.src='/images/xhx8.png'" alt="学习前端3件套"/></a><div class="content"><a class="title" href="/2024/12/07/%E5%AD%A6%E4%B9%A0%E5%89%8D%E7%AB%AF3%E4%BB%B6%E5%A5%97/" title="学习前端3件套">学习前端3件套</a><time datetime="2024-12-07T08:53:43.000Z" title="发表于 2024-12-07 16:53:43">2024-12-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/02/AI%E7%99%BE%E9%97%AE/" title="AI百问"><img src="/images/banner3.webp" onerror="this.onerror=null;this.src='/images/xhx8.png'" alt="AI百问"/></a><div class="content"><a class="title" href="/2024/12/02/AI%E7%99%BE%E9%97%AE/" title="AI百问">AI百问</a><time datetime="2024-12-02T13:41:13.000Z" title="发表于 2024-12-02 21:41:13">2024-12-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/28/Go%E8%AF%AD%E8%A8%80%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%B8%8E%E5%BA%94%E7%94%A8%EF%BC%88%E5%81%8F%E5%90%8E%E7%AB%AF)/" title="Go语言的学习与应用（偏后端)"><img src="/images/banner.webp" onerror="this.onerror=null;this.src='/images/xhx8.png'" alt="Go语言的学习与应用（偏后端)"/></a><div class="content"><a class="title" href="/2024/11/28/Go%E8%AF%AD%E8%A8%80%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%B8%8E%E5%BA%94%E7%94%A8%EF%BC%88%E5%81%8F%E5%90%8E%E7%AB%AF)/" title="Go语言的学习与应用（偏后端)">Go语言的学习与应用（偏后端)</a><time datetime="2024-11-28T12:20:22.000Z" title="发表于 2024-11-28 20:20:22">2024-11-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/28/Linux%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0(1)/" title="Linux操作系统"><img src="/images/banner.webp" onerror="this.onerror=null;this.src='/images/xhx8.png'" alt="Linux操作系统"/></a><div class="content"><a class="title" href="/2024/11/28/Linux%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0(1)/" title="Linux操作系统">Linux操作系统</a><time datetime="2024-11-28T12:20:22.000Z" title="发表于 2024-11-28 20:20:22">2024-11-28</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 By OrangeLin2312</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div id="footer-container"><div class="footer-item1"><div class="fiem">欢迎来到我的第五次元。</div><div class="fiem">特别鸣谢浣熊静态以及动图贡献者@弗雷</div><button onclick="firework">🎇感谢你的到来，点击我给你放烟花看！</button></div><div class="footer-item2"><div class="fiem"><a href="/shuoshuo/">🫥我的说说</a></div><div class="fiem"><a href="/about/">💕关于蒜头王八</a></div><div class="fiem"><a href="/archives/">😎我的归档</a></div><div class="fiem"><a href="/">❤️逛逛主页</a></div><div class="fiem"><a href="/categories/">🀄看看文章分类</a></div><div class="fiem"><a href="/tags/">🥟看看文章标签</a></div><div class="fiem"><a href="/comment/">😍去留言！！</a></div><div class="fiem"><a href="/link/">💕看看我的朋友圈</a></div><div class="fiem"><a href="/movies/">🎞️看看我的追番</a></div></div><div class="footer-item3"><div class="fitem">这里空空如也~不知道写什么好</div></div></div><div id="footer-bottom"><blockquote><p>首页以及文章所有图片出自<a target="_blank" rel="noopener" href="https://re.bluepoch.com/home/">重返未来1999官网</a><p>向深蓝的精致角色图致敬！感恩——❤️💕</p></p></blockquote></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"></div><div id="rightside-config-show"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.isShuoshuo
  const option = null

  const commentCount = n => {
    const isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
    if (isCommentCount) {
      isCommentCount.textContent= n
    }
  }

  const initGitalk = (el, path) => {
    if (isShuoshuo) {
      window.shuoshuoComment.destroyGitalk = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    const gitalk = new Gitalk({
      clientID: 'Ov23liwFG4kOUlSFvgot',
      clientSecret: 'b894737712f035e24da63524ab1882a7bde175af',
      repo: 'OrangeComments',
      owner: 'OrangeLin2312',
      admin: ['OrangeLin2312'],
      updateCountCallback: commentCount,
      ...option,
      id: isShuoshuo ? path : (option && option.id) || '3317f87337dfe498b007153c94d0b9a2'
    })

    gitalk.render('gitalk-container')
  }

  const loadGitalk = async(el, path) => {
    if (typeof Gitalk === 'function') initGitalk(el, path)
    else {
      await btf.getCSS('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css')
      await btf.getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js')
      initGitalk(el, path)
    }
  }

  if (isShuoshuo) {
    'Gitalk' === 'Gitalk'
      ? window.shuoshuoComment = { loadComment: loadGitalk }
      : window.loadOtherComment = loadGitalk
    return
  }

  if ('Gitalk' === 'Gitalk' || !false) {
    if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
    else loadGitalk()
  } else {
    window.loadOtherComment = loadGitalk
  }
})()</script></div><div class="aplayer no-destroy" data-id="12860445508" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="true" data-order="random" data-preload="none" data-autoplay="true" muted></div><script src="/styles/js/fish.js"></script><script src="/styles/js/footer.js"></script><script id="canvas_nest" defer="defer" color="255,230,130" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="true" data-text="你是坠棒的！,我是最棒的！,社会你我他,文明靠大家" data-fontsize="25px" data-random="false" async="async"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/Meting.min.js"></script><script>(() => {
  const destroyAplayer = () => {
    if (window.aplayers) {
      for (let i = 0; i < window.aplayers.length; i++) {
        if (!window.aplayers[i].options.fixed) {
          window.aplayers[i].destroy()
        }
      }
    }
  }

  const runMetingJS = () => {
    typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()
  }

  btf.addGlobalFn('pjaxSend', destroyAplayer, 'destroyAplayer')
  btf.addGlobalFn('pjaxComplete', loadMeting, 'runMetingJS')
})()</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      pjax.loadUrl('/404.html')
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="请输入关键词&lt;(￣︶￣)↗[GO!]" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && location.pathname =='/'){
    
    var parent = document.getElementById('recent-posts');
    var child = '<div class="swiper-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/images/hometop1.webp" alt="/images/hometop1.webp"/></div><div class="blog-slider__content"><span class="blog-slider__code">2018-01-05</span><a class="blog-slider__title" href="2018/01/05/设计模式/">设计模式学习</a><div class="blog-slider__text">简单好用的 hexo 博客文章置顶插件！</div><a class="blog-slider__button" href="2018/01/05/设计模式/">详情</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/images/img1.jpg" alt="/images/img1.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2024-12-02</span><a class="blog-slider__title" href="2024/12/02/AI百问/">AI百问</a><div class="blog-slider__text">腾讯元宝，妈妈的好大儿！</div><a class="blog-slider__button" href="2024/12/02/AI百问/">详情</a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载swiper')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script>
<script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiper.min.js"></script>
<script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper@0.18/swiper/swiperindex.js"></script>
<style></style><!-- hexo injector body_end end --></body></html>